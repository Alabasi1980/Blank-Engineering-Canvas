
# قائمة التحقق للقبول (Acceptance Checklist)

تستخدم هذه القائمة للتأكد من أن التطبيق قد تحول بالكامل إلى **محرك عام (Generic Engine)** ولم يعد يحتوي على أي منطق مخصص لمجال محدد (مثل المقاولات).

---

## 1. اختبار الحالة الصفرية (Zero-State Test)
عند تشغيل التطبيق لأول مرة (بعد مسح LocalStorage/IndexedDB):

- [ ] **قائمة الأبعاد (Dimensions Registry):** يجب أن تكون فارغة تماماً. لا توجد حقول مثل "المستودع" أو "الحساب".
- [ ] **القوائم المرجعية (Master Data):** يجب أن تكون فارغة. لا توجد شجرة حسابات افتراضية ولا قائمة مشاريع.
- [ ] **لوحة القيادة (Dashboard):** يجب أن تعرض رسالة ترحيبية أو زر "ابدأ الإعداد" (Setup Wizard)، وليس بطاقات فارغة لـ "المشتريات".
- [ ] **القواعد (Rules):** لا توجد أي قواعد معالجة محددة مسبقاً.

## 2. اختبار نقاء الكود (Codebase Purity Audit)
فحص ملفات الـ `src/core` و `src/hooks`:

- [ ] **البحث النصي (Grep Test):** البحث عن كلمات `warehouse`, `account`, `material`, `project` يجب أن يعود بنتائج **صفر** (باستثناء ملفات `migrations` أو `templates`).
- [ ] **المنطق الشرطي (Conditional Logic):** لا توجد جمل شرطية تعتمد على معرفات ثابتة.
    *   *مرفوض:* `if (dim.id === 'accounts')`
    *   *مقبول:* `if (dim.type === 'tree')`
- [ ] **الأنواع (Types):** واجهة `Transaction` لا تحتوي على حقول اختيارية مسماة (مثل `warehouseId?`). يجب أن تستخدم `attributes: Record<string, any>`.

## 3. اختبار الاستيراد (Ingestion Test)
عند محاولة استيراد ملف Excel جديد:

- [ ] **عدم التخمين المسبق:** النظام لا يفترض أن العمود `A` هو "التاريخ" والعمود `B` هو "المبلغ" إلا إذا قام المستخدم بتعريف ذلك في "كلمات الربط" (Aliases).
- [ ] **المرونة:** إذا احتوى الملف على عمود "رقم اللوحة"، يجب أن يسمح النظام بإنشاء بُعد جديد له فوراً أثناء الاستيراد.

## 4. اختبار حيادية الواجهة (UI Neutrality)
- [ ] **الأيقونات:** لا تظهر أيقونة "شاحنة" أو "خوذة" في القوائم إلا إذا اختارها المستخدم للبُعد الخاص به.
- [ ] **المسميات:** القوائم المنسدلة تعرض "اسم البُعد" الذي عرفه المستخدم (مثلاً: "الفرع") وليس نصاً ثاباً ("المستودع").

## 5. سيناريو "متجر البيتزا" (The Pizza Shop Scenario)
لإثبات نجاح التحول، يجب أن نكون قادرين على إعداد النظام لمتجر بيتزا دون تغيير سطر كود واحد:
- [ ] تعريف بُعد "نوع البيتزا" (بدل "المواد").
- [ ] تعريف بُعد "اسم السائق" (بدل "المشروع").
- [ ] استيراد ملف مبيعات يومية.
- [ ] بناء تقرير "مبيعات السائقين" بنجاح.

---
**حالة الاعتماد:**
- [ ] المرحلة 1 (Core Cleanup) مكتملة.
- [ ] المرحلة 2 (Data Model) مكتملة.
- [ ] المرحلة 3 (Ingestion) مكتملة.
- [ ] النظام جاهز للإطلاق العام.
